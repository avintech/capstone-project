<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Capstone Project QR Code Scanner</title>
  </head>
  <body translate="no">
    <input type="text" size="16" placeholder="Tracking Code" class="qrcode-text"><label class="qrcode-text-btn"><input type="file" accept="image/*" capture="environment" onclick="return showQRIntro();" onchange="openQRCamera(this);" tabindex="-1"></label>
    <input type="button" value="Go" disabled="">
    <p id="demo"></p>
    <table>
      <tr>
        <th id="name"></th>
      </tr>      
      <tr>
        <th id="age"></th>
      </tr>
    </table>
  </body>
  <style>
      body, input {font-size:14pt}
    input, label {vertical-align:middle}
    .qrcode-text {padding-right:1.7em; margin-right:0}
    .qrcode-text-btn {display:inline-block; background:url(//dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg) 50% 50% no-repeat; height:1em; width:1.7em; margin-left:-1.7em; cursor:pointer}
    .qrcode-text-btn > input[type=file] {position:absolute; overflow:hidden; width:1px; height:1px; opacity:0}
  </style>
  <script>
    window.console = window.console || function(t) {};
  </script>
  <script>
    if (document.location.search.match(/type=embed/gi)) {
      window.parent.postMessage("resize", "*");
    }
  </script>
  <script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-de7e2ef6bfefd24b79a3f68b414b87b8db5b08439cac3f1012092b2290c719cd.js"></script>
  <script src="https://dmla.github.io/jsqrcode/src/qr_packed.js"></script>
  <script id="rendered-js">
        function openQRCamera(node) {
          var reader = new FileReader();
          reader.onload = function () {
            node.value = "";
              qrcode.callback = function (res) {
                if (res instanceof Error) {
                  alert("No QR code found. Please make sure the QR code is within the camera's frame and try again.");
                } else {
                  // res is the info in the qr code
                  node.parentNode.previousElementSibling.value = res;
                  //set json code in qr code
                  //parse here
                  var obj = JSON.parse(res);
                  document.getElementById("name").innerHTML = obj.name;
                  document.getElementById("age").innerHTML = obj.age;
                }
              };
              qrcode.decode(reader.result);
            };
            reader.readAsDataURL(node.files[0]);
          }
          function showQRIntro() {
          return confirm("Use your camera to take a picture of a QR code.");
          }
          //# sourceURL=pen.js
          //https://www.sitepoint.com/create-qr-code-reader-mobile-website/
          //https://www.w3schools.com/js/js_json_parse.asp
          //https://www.w3schools.com/html/html_tables.asp
  </script>
  </html>